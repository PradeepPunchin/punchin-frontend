<ng-container *ngIf="role =='BANKER' || role =='SUPER_BANKER'">
    <div class="container-fluid claim-dashboard-box">
        <div class="claim-dashboard-search d-flex justify-content-between align-items-center"
            *ngIf="cordListData.length > 0">
            <h6>Service/Claim Dashboard</h6>
            <form [formGroup]=" searchForm">
                <div class="row" *ngIf="onStep === 0">
                    <div class="col-4">
                        <select class="form-select form-select-md" aria-label=".form-select-sm example"
                            (input)="searchBySelectedData($event)" formControlName="selectedValue">
                            <option selected [ngValue]="null">Select</option>
                            <option value="CLAIM_DATA_ID">Punchin Ref. ID</option>
                            <option value="NAME">Name</option>
                            <option value="LOAN_ACCOUNT_NUMBER">Loan Account Number</option>
                        </select>
                    </div>
                    <div class="col-6">
                        <div class="form-group">
                            <input type="search" class="form-control"
                                placeholder="Search by Bor_Name or LAN or P_Ref.id" formControlName="search" />
                        </div>
                    </div>
                    <div class="col-2">
                        <button class="btn btn-primary" (click)="searchTableData()"
                            [disabled]="!searchForm.valid">Search</button>
                    </div>
                </div>
            </form>
        </div>
        <div class="row">
            <div class="col-3" [ngClass]="{ active: onStep === 0 }" (click)="onStep = 0">
                <div class="claims-allocated-box" (click)="bankerCardDetails('ALL')">
                    <img src="../../../assets/icons/claim.svg">
                    <div>
                        <h5>
                            {{bankerDashboardData[bankerStatusEnum.all] || 0}}
                        </h5>
                        <h6> Claims - Allocated</h6>
                    </div>
                </div>
            </div>
            <div class="col-3" [ngClass]="{ active: onStep === 1 }" (click)="onStep = 1;innerStep = 0">
                <div class="claims-in-progress-box" (click)="bankerCardDetails('WIP')">
                    <img src="../../../assets/icons/claim.svg">
                    <div>
                        <h5>
                            {{bankerDashboardData[bankerStatusEnum.inprogress] || 0}}
                        </h5>
                        <h6>Claims - In Progress</h6>
                    </div>
                </div>
            </div>
            <div class="col-3" [ngClass]="{ active: onStep === 2 }" (click)="onStep = 2">
                <div class="claims-verify-box" (click)="bankerCardDetails('UNDER_VERIFICATION')">
                    <img src="../../../assets/icons/claim.svg">
                    <div>
                        <h5>{{bankerDashboardData[bankerStatusEnum.underVerification] || 0}}</h5>
                        <h6>Claims - Under Verification</h6>
                    </div>
                </div>
            </div>
            <div class="col-3" [ngClass]="{ active: onStep === 3 }" (click)="onStep = 3">
                <div class="claims-action-pending-box " (click)="bankerCardDetails('SETTLED')">
                    <img src="../../../assets/icons/claim.svg">
                    <div>
                        <h5>
                            {{bankerDashboardData[bankerStatusEnum.settled] || 0}}
                        </h5>
                        <h6>Claims - Submitted </h6>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <div *ngIf="claimListContent.length === 0 && isShow === true">
        <app-file-upload (AwsFileList)="onGetUploadedFile($event)"></app-file-upload>
    </div>
    <div class="cases-claims-box">
        <div class="claim-dashboard-btns d-flex justify-content-between align-items-center"
            *ngIf="cordListData.length > 0 && isShowFileUploaded">
            <h6 *ngIf="onStep === 0 || onStep === 2 || onStep === 3">Case/Claim({{this.totalrecords || 0}})</h6>
            <div *ngIf="onStep === 1">
                <button type="button" class="btn btn-light m-2" [routerLinkActive]="['active']"
                    [ngClass]="{active: innerStep === 0}" (click)="innerStep = 0"
                    (click)="bankerCardDetails('WIP')">In-Progress</button>

                <button type="button" [routerLinkActive]="['active']" class="btn btn-light"
                    [ngClass]="{active: innerStep === 1}" (click)="innerStep = 1"
                    (click)="bankerCardDetails('DISCREPENCY')">Discrepancy</button>
            </div>
            <button type="button" class="btn btn-primary btn1"
                *ngIf="(onStep === 0 || onStep === 1 || onStep === 2 || onStep === 3 ) && (role =='BANKER') "
                (click)="openUploaFiledModal(fileTemplate)">
                <img src="../../../assets/icons/action(white).svg" class="me-2">Upload xls File</button>

            <button type="button" class="btn btn-outline-primary" (click)="downloadMisReport()"
                *ngIf="onStep === 0 || onStep === 1 || onStep === 2 || onStep === 3">
                <ng-container *ngIf="isdownloadMisReport ;else isdownloadMisReportDone">
                    <i class="fa fa-spinner fa-spin" aria-hidden="true"></i> Downloading...
                </ng-container>
                <ng-template #isdownloadMisReportDone>
                    <img src="../../../assets/icons/download.svg" class="me-2">Download MIS
                    report
                </ng-template>
            </button>
        </div>
        <div *ngIf="cordListData.length > 0 && isShowFileUploaded">
            <div class="table-container table-responsive" *ngIf="onStep === 0">
                <table class="table  table-sm">
                    <thead>

                        <tr class="align-middle">
                            <th scope="col">S.No</th>
                            <th scope="col">Punchin Ref.ID</th>
                            <th scope="col">Lender Name </th>
                            <th scope="col">Claim Inward Date</th>
                            <th scope="col">Borrower Name</th>
                            <th scope="col">Borrower Contact Number</th>
                            <th scope="col">Borrower City</th>
                            <th scope="col">Borrower State</th>
                            <th scope="col">Borrower Pin Code</th>
                            <th scope="col">Borrower Email Id</th>
                            <th scope="col">Borrower Alternate Contact Number</th>
                            <th scope="col">Borrower Alternate Contact Details</th>
                            <th scope="col">Borrower DOB</th>
                            <th scope="col">Loan Account Number</th>
                            <th scope="col">Borrower Address</th>
                            <th scope="col">Loan Type</th>
                            <th scope="col">Loan Disbursal Date</th>
                            <th scope="col">Loan Outstanding Amount</th>
                            <th scope="col">Loan Amount</th>
                            <th scope="col">Loan Amount Paid By Borrower</th>
                            <th scope="col">Loan Amount Balance</th>
                            <th scope="col">Branch Code</th>
                            <th scope="col">Branch Name</th>
                            <th scope="col">Branch Address</th>
                            <th scope="col">Branch Pin Code</th>
                            <th scope="col">Branch City</th>
                            <th scope="col">Branch State</th>
                            <th scope="col">Loan Account Manager Name</th>
                            <th scope="col">Account Manager Contact Number</th>
                            <th scope="col">Insurer Name</th>
                            <th scope="col">Master Pol Number</th>
                            <th scope="col">Policy Number</th>
                            <th scope="col">Policy Start Date</th>
                            <th scope="col">Policy Coverage Duration</th>
                            <th scope="col">Policy Sum Assured</th>
                            <th scope="col">Insurer Claim Id</th>
                            <th scope="col">Nominee Name</th>
                            <th scope="col">Nominee RelationShip</th>
                            <th scope="col">Nominee Contact Number</th>
                            <th scope="col">Nominee Email Id</th>
                            <th scope="col">Nominee Address</th>
                            <th scope="col" class="text-center">Status</th>
                            <th scope="col" class="text-center">Action</th>
                        </tr>
                    </thead>
                    <tbody class="align-middle" *ngFor="let item of cordListData;let i = index">
                        <tr>
                            <td>
                                {{ (pageNo ) * pageSize + i +1 }}
                            </td>
                            <td>
                                <span class="text-color" (click)="viewbankerDocRequest(item.submittedBy,item.id)">
                                    {{item.punchinClaimId}}
                                </span>
                            </td>
                            <td>{{item.lenderName}}</td>
                            <td>
                                {{item.claimInwardDate | date: 'dd/MM/yyyy' }}</td>
                            <td>
                                {{item.borrowerName}}</td>
                            <td>
                                {{item.borrowerContactNumber}}</td>
                            <td>{{item.borrowerCity}}</td>
                            <td>{{item.borrowerState}}</td>
                            <td>{{item.borrowerPinCode}}</td>
                            <td>{{item.borrowerEmailId}}</td>
                            <td>{{item.borrowerAlternateContactNumber}}</td>
                            <td>{{item.borrowerAlternateContactDetails}}</td>
                            <td>{{item.borrowerDob}}</td>
                            <td>{{item.loanAccountNumber}}</td>
                            <td>{{item.borrowerAddress}}</td>
                            <td>{{item.loanType }}</td>
                            <td>{{item.loanDisbursalDate | date: 'dd/MM/yyyy' }}</td>
                            <td>{{item.loanOutstandingAmount}}</td>
                            <td>{{item.loanAmount}}</td>
                            <td>{{item.loanAmountPaidByBorrower}}</td>
                            <td>{{item.loanAmountBalance}}</td>
                            <td>{{item.branchCode}}</td>
                            <td>{{item.branchName}}</td>
                            <td>{{item.branchAddress}}</td>
                            <td>{{item.branchPinCode}}</td>
                            <td>{{item.branchCity}}</td>
                            <td>{{item.branchState}}</td>
                            <td>{{item.loanAccountManagerName}}</td>
                            <td>{{item.accountManagerContactNumber}}</td>
                            <td>{{item.insurerName}}</td>
                            <td>{{item.masterPolNumber}}</td>
                            <td>{{item.policyNumber}}</td>
                            <td>{{item.policyStartDate | date: 'dd/MM/yyyy' }}</td>
                            <td>{{item.policyCoverageDuration}}</td>
                            <td>{{item.policySumAssured}}</td>
                            <td>{{item.insurerClaimId}}</td>
                            <td>{{item.nomineeName}}</td>
                            <td>{{item.nomineeRelationShip}}</td>
                            <td>{{item.nomineeContactNumber}}</td>
                            <td>{{item.nomineeEmailId}}</td>
                            <td>{{item.nomineeAddress}}</td>
                            <td>
                                <span class="status-button">{{item.claimStatus | removeunderscore |
                                    titlecase}}</span>
                            </td>
                            <td class="text-center">
                                <span (click)="OpenAdditionalDocModal(raiseAdditionalDoc, item.id)"
                                    title="Raise Additional Doc Request">
                                    <i class="fa fa-file-text-o"></i>
                                </span>
                                <!-- <span (click)="downloadBankerDoc(item.id)" title="Download All Document">
                                    <i class="fa fa-download" aria-hidden="true"></i>
                                </span> -->
                                <span
                                    (click)="openTrackingModal(trackingTemplate,item.id,item.punchinClaimId, item.agentName)"
                                    title="Claim Tracking">
                                    <i class="fa fa-map-o" aria-hidden="true"></i>
                                </span>
                                <span (click)="openRemarkModal(remarkTemplate,item.id,item.punchinClaimId,'','')"
                                    title="Remark"
                                    *ngIf="item.bankerRemarkRead == null || item.bankerRemarkRead == true ">
                                    <i class="fa fa-comment" aria-hidden="true"></i>

                                </span>
                                <span (click)="openRemarkModal(remarkTemplate,item.id,item.punchinClaimId, '','')"
                                    title="Remark" *ngIf="item.bankerRemarkRead == false ">
                                    <i class="fa fa-comment" id="commentColor" aria-hidden="true"></i>

                                </span>
                            </td>

                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="table-container table-responsive"
            *ngIf="((onStep === 1 && innerStep === 0) || (onStep === 1 && innerStep === 1) || onStep === 2 || onStep === 3) && isShowFileUploaded">
            <table class="table  table-sm" *ngIf="isShow === false">
                <thead>
                    <tr class="align-middle">
                        <th scope="col">S.No</th>
                        <th scope="col"><span style="cursor:pointer;"
                                [routerLink]="['/pages/claim-documentation']">Punchin
                                Ref.
                                ID</span></th>
                        <th scope="col">Lender Name</th>
                        <th scope="col">Claim Inward Date</th>
                        <th scope="col">Borrower Name</th>
                        <th scope="col">Borrower Contact Number</th>
                        <th scope="col">Borrower City</th>
                        <th scope="col">Borrower State</th>
                        <th scope="col">Borrower Pin Code</th>
                        <th scope="col">Borrower Email Id</th>
                        <th scope="col">Borrower Alternate Contact Number</th>
                        <th scope="col">Borrower Alternate Contact Details</th>
                        <th scope="col">Borrower DOB</th>
                        <th scope="col">Loan Account Number</th>
                        <th scope="col">Borrower Address</th>
                        <th scope="col">Loan Type</th>
                        <th scope="col">Loan Disbursal Date</th>
                        <th scope="col">Loan Outstanding Amount</th>
                        <th scope="col">Loan Amount</th>
                        <th scope="col">Loan Amount Paid By Borrower</th>
                        <th scope="col">Loan Amount Balance</th>
                        <th scope="col">Branch Code</th>
                        <th scope="col">Branch Name</th>
                        <th scope="col">Branch Address</th>
                        <th scope="col">Branch Pin Code</th>
                        <th scope="col">Branch City</th>
                        <th scope="col">Branch State</th>
                        <th scope="col">Loan Account Manager Name</th>
                        <th scope="col">Account Manager Contact Number</th>
                        <th scope="col">Insurer Name</th>
                        <th scope="col">Master Pol Number</th>
                        <th scope="col">Policy Number</th>
                        <th scope="col">Policy Start Date</th>
                        <th scope="col">Policy Coverage Duration</th>
                        <th scope="col">Policy Sum Assured</th>
                        <th scope="col">Insurer Claim Id</th>
                        <th scope="col">Nominee Name</th>
                        <th scope="col">Nominee RelationShip</th>
                        <th scope="col">Nominee Contact Number</th>
                        <th scope="col">Nominee Email Id</th>
                        <th scope="col">Nominee Address</th>
                        <th scope="col" class="text-center">Status</th>
                        <th scope="col" class="text-center" *ngIf="(onStep === 1 && innerStep === 1) || onStep === 3 ">
                            Action</th>

                    </tr>
                </thead>
                <ng-container *ngIf="cordListData.length > 0 && isShowFileUploaded">
                    <tbody class="align-middle" *ngFor="let item of cordListData;let i = index">
                        <tr>
                            <td>
                                {{ (pageNo) * pageSize + i +1 }}
                            </td>
                            <td>{{item.punchinClaimId}}</td>
                            <td>{{item.lenderName}}</td>
                            <td>{{item.claimInwardDate | date: 'dd/MM/yyyy' }}</td>
                            <td>{{item.borrowerName}}</td>
                            <td>{{item.borrowerContactNumber}}</td>
                            <td>{{item.borrowerCity}}</td>
                            <td>{{item.borrowerState}}</td>
                            <td>{{item.borrowerPinCode}}</td>
                            <td>{{item.borrowerEmailId}}</td>
                            <td>{{item.borrowerAlternateContactNumber}}</td>
                            <td>{{item.borrowerAlternateContactDetails}}</td>
                            <td>{{item.borrowerDob}}</td>
                            <td>{{item.loanAccountNumber}}</td>
                            <td>{{item.borrowerAddress}}</td>
                            <td>{{item.loanType }}</td>
                            <td>{{item.loanDisbursalDate | date: 'dd/MM/yyyy' }}</td>
                            <td>{{item.loanOutstandingAmount}}</td>
                            <td>{{item.loanAmount}}</td>
                            <td>{{item.loanAmountPaidByBorrower}}</td>
                            <td>{{item.loanAmountBalance}}</td>
                            <td>{{item.branchCode}}</td>
                            <td>{{item.branchName}}</td>
                            <td>{{item.branchAddress}}</td>
                            <td>{{item.branchPinCode}}</td>
                            <td>{{item.branchCity}}</td>
                            <td>{{item.branchState}}</td>
                            <td>{{item.loanAccountManagerName}}</td>
                            <td>{{item.accountManagerContactNumber}}</td>
                            <td>{{item.insurerName}}</td>
                            <td>{{item.masterPolNumber}}</td>
                            <td>{{item.policyNumber}}</td>
                            <td>{{item.policyStartDate | date: 'dd/MM/yyyy' }}</td>
                            <td>{{item.policyCoverageDuration}}</td>
                            <td>{{item.policySumAssured}}</td>
                            <td>{{item.insurerClaimId}}</td>
                            <td>{{item.nomineeName}}</td>
                            <td>{{item.nomineeRelationShip}}</td>
                            <td>{{item.nomineeContactNumber}}</td>
                            <td>{{item.nomineeEmailId}}</td>
                            <td>{{item.nomineeAddress}}</td>
                            <td class="text-center status-button">{{item.claimStatus | removeunderscore | titlecase}}
                            </td>
                            <td class="text-center" *ngIf="onStep === 1 && innerStep === 1">
                                <!-- <span (click)="OpenBankerDiscrepancyModal(bankerDiscrepancy, item.id)">
                                    <i class="fa fa-file-text-o"></i>
                                </span> -->

                                <ng-container *ngIf="item.claimBankerStatus === 'BANKER_DISCREPANCY'; else OtherStatus">
                                    <span (click)="OpenBankerDiscrepancyModal(bankerDiscrepancy, item.id)">
                                        <i class="fa fa-file-text-o"></i>
                                    </span>
                                </ng-container>
                                <ng-template #OtherStatus>
                                    <span> <i class="fa fa-file-text-o" style="color: #8b8b8b;"></i>
                                    </span>
                                </ng-template>
                            </td>
                            <td class="text-center" *ngIf="onStep === 3">
                                <span (click)="downloadBankerDoc(item.id)" title="Download All Document">
                                    <i class="fa fa-download" aria-hidden="true"></i>
                                </span>
                            </td>
                        </tr>
                    </tbody>
                </ng-container>
            </table>
        </div>
        <div class="pagination-box d-flex justify-content-end align-items-center"
            *ngIf="cordListData.length > 0 && isShowFileUploaded">
            <!-- <div class="pages-per-rows d-flex align-items-center">
                <p class="per-row-title">Page Per Rows</p>
                <h6 class="per-row-text">
                    <select (input)="pagePerData($event)">
                        <option value="10">10</option>
                        <option [value]="totalrecords">{{totalrecords}}</option>
                    </select>
                </h6>
            </div> -->

            <div class="pagination-content">
                <pagination [totalItems]="totalrecords" previousText="&lsaquo;" nextText="&rsaquo;"
                    (pageChanged)="changeBankerPage($event)" [itemsPerPage]="pageSize" firstText="&laquo;"
                    lastText="&raquo;" [maxSize]="5" [(ngModel)]="currentPage"></pagination>
            </div>
        </div>
    </div>
    <div class="cases-upload-box" *ngIf="claimListContent.length > 0">
        <div class="claim-dashboard-btns d-flex justify-content-between align-items-center">
            <h6>Service/Claim Dashboard ({{totalrecords || 0}})</h6>
            <div>
                <!-- <button type="button" class="btn btn-outline-primary" (click)="downloadRejectedMIS()">
                    <ng-container *ngIf="isUnmappedData ;else isUnmappedDataDone">
                        <i class="fa fa-spinner fa-spin" aria-hidden="true"></i> Downloading...
                    </ng-container>
                    <ng-template #isUnmappedDataDone>
                        Download Invalid Claim Report
                    </ng-template>
                </button> -->
                <button type="button" class="btn btn-outline-primary" (click)="deleteClaim()">Discard</button>
                <button type="button" class="btn btn-primary" (click)="submitClaim()">
                    <ng-container *ngIf=" isSubmitted ;else isSubmittedDone">
                        <i class="fa fa-spinner fa-spin" aria-hidden="true"></i> Submitting...
                    </ng-container>
                    <ng-template #isSubmittedDone>
                        Submit
                    </ng-template>
                </button>
            </div>
        </div>
        <div class="table-container table-responsive">
            <table class="table">
                <thead>
                    <tr class="align-middle">
                        <th scope="col">S.No</th>
                        <th scope="col">PunchIn Ref. ID</th>
                        <th scope="col">Lender Name</th>
                        <th scope="col">Claim Inward Date</th>
                        <th scope="col">Borrower Name</th>
                        <th scope="col">Borrower Contact Number</th>
                        <th scope="col">Borrower City</th>
                        <th scope="col">Borrower State</th>
                        <th scope="col">Borrower Pin Code</th>
                        <th scope="col">Borrower Email Id</th>
                        <th scope="col">Borrower Alternate Contact Number</th>
                        <th scope="col">Borrower Alternate Contact Details</th>
                        <th scope="col">Borrower DOB</th>
                        <th scope="col">Loan Account Number</th>
                        <th scope="col">Borrower Address</th>
                        <th scope="col">Loan Type</th>
                        <th scope="col">Loan Disbursal Date</th>
                        <th scope="col">Loan Outstanding Amount</th>
                        <th scope="col">Loan Amount</th>
                        <th scope="col">Loan Amount Paid By Borrower</th>
                        <th scope="col">Loan Amount Balance</th>
                        <th scope="col">Branch Code</th>
                        <th scope="col">Branch Name</th>
                        <th scope="col">Branch Address</th>
                        <th scope="col">Branch Pin Code</th>
                        <th scope="col">Branch City</th>
                        <th scope="col">Branch State</th>
                        <th scope="col">Loan Account Manager Name</th>
                        <th scope="col">Account Manager Contact Number</th>
                        <th scope="col">Insurer Name</th>
                        <th scope="col">Master Pol Number</th>
                        <th scope="col">Policy Number</th>
                        <th scope="col">Policy Start Date</th>
                        <th scope="col">Policy Coverage Duration</th>
                        <th scope="col">Policy Sum Assured</th>
                        <th scope="col">Insurer Claim Id</th>
                        <th scope="col">Nominee Name</th>
                        <th scope="col">Nominee RelationShip</th>
                        <th scope="col">Nominee Contact Number</th>
                        <th scope="col">Nominee Email Id</th>
                        <th scope="col">Nominee Address</th>
                    </tr>
                </thead>

                <tbody class="align-middle" *ngFor="let item of claimListContent;let i = index">
                    <tr [ngClass]="item.validClaimData === false ? 'changeBgColor':''">
                        <td>
                            {{ (pageNo) * pageSize + i +1 }}
                        </td>
                        <td>{{item.punchinClaimId}}</td>
                        <td>{{item.punchinBankerId}}</td>
                        <td>{{item.claimInwardDate | date: 'dd/MM/yyyy' }}</td>
                        <td>{{item.borrowerName}}</td>
                        <td>{{item.borrowerContactNumber}}</td>
                        <td>{{item.borrowerCity}}</td>
                        <td>{{item.borrowerState}}</td>
                        <td>{{item.borrowerPinCode}}</td>
                        <td>{{item.borrowerEmailId}}</td>
                        <td>{{item.borrowerAlternateContactNumber}}</td>
                        <td>{{item.borrowerAlternateContactDetails}}</td>
                        <td>{{item.borrowerDob}}</td>
                        <td>{{item.loanAccountNumber}}</td>
                        <td>{{item.borrowerAddress}}</td>
                        <td>{{item.loanType }}</td>
                        <td>{{item.loanDisbursalDate | date: 'dd/MM/yyyy' }}</td>
                        <td>{{item.loanOutstandingAmount}}</td>
                        <td>{{item.loanAmount}}</td>
                        <td>{{item.loanAmountPaidByBorrower}}</td>
                        <td>{{item.loanAmountBalance}}</td>
                        <td>{{item.branchCode}}</td>
                        <td>{{item.branchName}}</td>
                        <td>{{item.branchAddress}}</td>
                        <td>{{item.branchPinCode}}</td>
                        <td>{{item.branchCity}}</td>
                        <td>{{item.branchState}}</td>
                        <td>{{item.loanAccountManagerName}}</td>
                        <td>{{item.accountManagerContactNumber}}</td>
                        <td>{{item.insurerName}}</td>
                        <td>{{item.masterPolNumber}}</td>
                        <td>{{item.policyNumber}}</td>
                        <td>{{item.policyStartDate | date: 'dd/MM/yyyy' }}</td>
                        <td>{{item.policyCoverageDuration}}</td>
                        <td>{{item.policySumAssured}}</td>
                        <td>{{item.insurerClaimId}}</td>
                        <td>{{item.nomineeName}}</td>
                        <td>{{item.nomineeRelationShip}}</td>
                        <td>{{item.nomineeContactNumber}}</td>
                        <td>{{item.nomineeEmailId}}</td>
                        <td>{{item.nomineeAddress}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="pagination-box d-flex justify-content-end align-items-center">
            <!-- <div class="pages-per-rows d-flex align-items-center">
                <p class="per-row-title">Page Per Rows</p>
                <h6 class="per-row-text">
                    <select (input)="pagePerData($event)">
                        <option value="10">10</option>
                        <option [value]="totalrecords">{{totalrecords}}</option>
                    </select>
                </h6>
            </div> -->
            <div class="pagination-content">
                <pagination [totalItems]="totalrecords" previousText="&lsaquo;" nextText="&rsaquo;"
                    (pageChanged)="pageChanged($event)" [itemsPerPage]="pageSize" firstText="&laquo;" lastText="&raquo;"
                    [maxSize]="5" [(ngModel)]="currentPage"></pagination>
            </div>
        </div>
    </div>

    <ng-template #raiseAdditionalDoc>
        <div class="modal-header">
            <h6 class="modal-title">Raise Additional Document Request</h6>

            <button type="button" class="btn-close close pull-right" aria-label="Close"
                (click)="this.bsModalRef1?.hide()">
                <span aria-hidden="true" class="visually-hidden">&times;</span>
            </button>
        </div>
        <div class="modal-body">
            <div class="container-fluid raise-additional-container">
                <div class="row">
                    <div class="col-12">
                        <div class="new-requirements-table">
                            <form [formGroup]="addtionalForm" (ngSubmit)="submitAdditioanlDoc()">
                                <div class="addtionalTable">
                                    <table class="table table-responsive table-sm">
                                        <thead>
                                            <tr class="align-middle">
                                                <th scope="col">Document Name</th>
                                                <th scope="col" class="text-center">Select</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let item of additionalDocument; let i=index">
                                                <td>{{item.name}}</td>
                                                <td class="text-center">
                                                    <input type="checkbox" [value]="item.value"
                                                        (change)="onSelectDoc($event)" />
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="mt-2">
                                    <label>Remark</label>
                                    <input class="form-control" placeholder=" Enter Remark" formControlName="remark"
                                        (keydown)="spaceRemoveFirst($event)">
                                </div>
                                <div class="d-flex justify-content-end">
                                    <button class="btn btn-primary" [disabled]="!addtionalForm.valid">Submit</button>
                                </div>
                            </form>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </ng-template>

    <ng-template #bankerDiscrepancy>
        <div class="modal-header">
            <button type="button" class="btn-close close pull-right" aria-label="Close"
                (click)="this.bsModalRef2?.hide()">
                <span aria-hidden="true" class="visually-hidden">&times;</span>
            </button>
        </div>
        <div class="modal-body new-requirements-container">

            <div class="container-fluid ">
                <h6 class="new-requirements-heading">Discrepancy/New Requirements</h6>
                <div class="row">
                    <div class="col-8">
                        <div class="table-responsive new-requirements-table">
                            <table class="table table-bordered table-sm">
                                <thead>
                                    <tr class="align-middle">
                                        <th scope="col">Document Name</th>
                                        <th scope="col" class="text-center">Uploaded Doc</th>
                                        <th scope="col" class="text-center">Doc Status</th>
                                        <th scope="col" class="text-center">View Doc</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <ng-container *ngFor="let item of bankerDoc">
                                        <tr>
                                            <td>{{item.agentDocType | removeunderscore | titlecase}} </td>
                                            <td class="text-center">
                                                <span *ngIf="item.isVerified == false"><img
                                                        src="../../../../assets/icons/right-tick-blue.svg"></span>
                                                <span *ngIf="item.isVerified == true && item.isApproved == false">
                                                    <img src="assets/icons/cross-red.svg">
                                                </span>
                                                <span *ngIf="item.isVerified == true && item.isApproved == true">
                                                    <img src="assets/icons/tick-green.svg"> </span>
                                            </td>
                                            <td class="text-center">
                                                <p class="doc-status-yellow-text" *ngIf="item.isVerified == false">
                                                    Uploaded
                                                </p>
                                                <p class="doc-status-red-text"
                                                    *ngIf="item.isVerified == true && item.isApproved == false">
                                                    Rejected
                                                </p>
                                                <p class="doc-status-blue-text"
                                                    *ngIf="item.isVerified == true && item.isApproved == true">
                                                    Approved
                                                </p>
                                            </td>
                                            <td class="text-center" (click)="viewBankerDoc(item)"><img
                                                    src="../../../assets/icons/eye.svg">
                                            </td>
                                        </tr>
                                    </ng-container>

                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="col-4">
                        <form [formGroup]="bankerform">

                            <div class="document-preview-container">
                                <p class="upload-required-text">Upload Required Documents</p>

                                <select class="form-select" aria-label="Default select example"
                                    (input)="filterByAddDoc($event)" formControlName="addDoc">
                                    <option selected [ngValue]="null">Select Additional Document Type</option>
                                    <option *ngFor="let item of selectBankerDoc" [value]="item">{{item}}</option>
                                </select>
                                <input type="file" (change)="fileBrowseHandler($event)" #fileUplaod class="d-none" />
                                <div class="browse-upload-box d-flex align-items-center justify-content-between"
                                    (click)="fileUplaod.click()">
                                    <p class="browse-text">Browse</p>
                                    <button type="button" class="btn btn-light">Upload</button>
                                </div>
                                <p>{{docName}}</p>
                                <button type="button" class="btn btn-primary" (click)="submitBankerData()"
                                    [disabled]="!bankerform.valid">Submit</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

        </div>
    </ng-template>
</ng-container>



<!-- Verifier Dashboard -->
<ng-container *ngIf="role =='ADMIN' || role =='VERIFIER'">
    <div class="container-fluid claim-dashboard-box">
        <div class="claim-dashboard-search d-flex justify-content-between align-items-center"
            *ngIf="verifiercordListData.length > 0">
            <h6>Service/Claim Dashboard</h6>
            <form [formGroup]="searchForm">
                <div class="row" *ngIf="onStep === 0">
                    <div class="col-4">
                        <select class="form-select form-select-md" aria-label=".form-select-sm example"
                            (input)="searchBySelectedData($event)" formControlName="selectedValue">
                            <option selected [ngValue]="null">Select</option>
                            <option value="CLAIM_DATA_ID">PunchIn Ref. ID</option>
                            <option value="NAME">Name</option>
                            <option value="LOAN_ACCOUNT_NUMBER">Loan Account Number</option>
                        </select>
                    </div>
                    <div class="col-6">
                        <div class="form-group">
                            <input type="search" class="form-control" placeholder="Bor_Name, LAN & P_Ref.id"
                                formControlName="search" />
                        </div>
                    </div>
                    <div class="col-2">
                        <button class="btn btn-primary" (click)="searchTableData()">Search</button>
                    </div>
                </div>
            </form>
        </div>

        <div class="row">
            <div class="col-3" [ngClass]="{active: onStep === 0}" (click)="onStep = 0">
                <div class="claims-allocated-box" (click)="verifierCardDetails('ALL')">
                    <img src="../../../assets/icons/claim.svg">
                    <div>
                        <h5>{{verifierDashboardData[verifierStatusEnum.all] || 0}}</h5>
                        <h6> Claims - Allocated</h6>
                    </div>
                </div>
            </div>
            <div class="col-3" [ngClass]="{active: onStep === 1}" (click)="onStep = 1">
                <div class="claims-in-progress-box" (click)="verifierCardDetails('WIP');innerStep = 0">
                    <img src="../../../assets/icons/claim.svg">
                    <div>
                        <h5>{{verifierDashboardData[verifierStatusEnum.inprogress] || 0}}</h5>
                        <h6>Claims - In Progress</h6>
                    </div>
                </div>
            </div>
            <div class="col-3">
                <div class="claims-verify-box" (click)="verifierCardDetails('UNDER_VERIFICATION')">
                    <img src="../../../assets/icons/claim.svg">
                    <div>
                        <h5>{{verifierDashboardData[verifierStatusEnum.underVerification] || 0}}</h5>
                        <h6>Claims - Under Verification</h6>
                    </div>
                </div>
            </div>
            <div class="col-3" [ngClass]="{active: onStep === 2}" (click)="onStep = 2">
                <div class="claims-action-pending-box" (click)="verifierCardDetails('SETTLED')">
                    <img src="../../../assets/icons/claim.svg">
                    <div>
                        <h5>{{verifierDashboardData[verifierStatusEnum.settled] || 0}}</h5>
                        <h6>Claims - Submitted</h6>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="cases-claims-box verifier-table">
        <div class="claim-dashboard-btns d-flex justify-content-between align-items-center">
            <h6 *ngIf="(onStep === 0 || onStep === 2 )">Cases/Claims({{totalrecords || 0}})</h6>
            <div *ngIf="onStep === 1">
                <button type="button" class="btn btn-primary m-2" [routerLinkActive]="['active']"
                    [ngClass]="{active: innerStep === 0}" (click)="innerStep = 0"
                    (click)="verifierCardDetails('WIP')">In-Progress</button>
                <button type="button" [routerLinkActive]="['active']" class="btn btn-primary"
                    [ngClass]="{active: innerStep === 1}" (click)="innerStep = 1"
                    (click)="verifierCardDetails('DISCREPENCY')">Discrepancy</button>
            </div>
            <button type="button" class="btn btn-outline-primary v-bnt1" (click)="downloadMisReport()">
                <ng-container *ngIf="isdownloadMisReport ;else isdownloadMisReportDone">
                    <i class="fa fa-spinner fa-spin" aria-hidden="true"></i> Downloading...
                </ng-container>
                <ng-template #isdownloadMisReportDone>
                    <img src="../../../assets/icons/download.svg" class="me-2">Download MIS
                    report
                </ng-template>
            </button>
            <select class="form-select form-select-md" aria-label=".form-select-sm example" *ngIf="onStep === 0"
                (input)="filterByStatus($event)">
                <option selected>Filter by Status</option>
                <option value="ALLOCATED">Allocated</option>
                <option value="WIP">In-Progress</option>
                <option value="SETTLED">Submitted</option>

                <!-- <option value="3">Sent to Insurer</option> -->
            </select>
        </div>
        <div class="table-container table-responsive"
            *ngIf="onStep === 0 || onStep === 1 || (onStep === 1 && innerStep === 0) || (onStep === 1 && innerStep === 1) || onStep === 2">
            <table class="table table-sm">
                <thead>
                    <tr class="align-middle">
                        <th scope="col">S.No</th>
                        <th scope="col">Punchin Ref.ID</th>
                        <th scope="col">Claim Inward Date </th>
                        <th scope="col">Borrower Name</th>
                        <th scope="col">Nominee Name </th>
                        <th scope="col">Contact number</th>
                        <th scope="col">Address</th>
                        <th scope="col">Signed claim form </th>
                        <th scope="col">Death Certificate </th>
                        <th scope="col">Borrower KYC Proof</th>
                        <th scope="col"> Nominee KYC Proof</th>
                        <th scope="col">Bank A/c Proof </th>
                        <th scope="col">Additional Document</th>
                        <th scope="col">Status</th>
                        <th scope="col" class="text-center " *ngIf="onStep === 0">Action</th>

                    </tr>
                </thead>
                <tbody class="align-middle" *ngFor="let item of verifiercordListData;let i = index">
                    <tr>
                        <td>
                            {{ (pageNo) * pageSize + i +1 }}
                        </td>
                        <td *ngIf=" (onStep === 0) || (onStep === 1 && innerStep === 0)">
                            <span class="text-color"
                                (click)="viewUnderVerification(item.claimStatus, item.id, item.agentName)">
                                {{item.punchinClaimId}}
                            </span>
                        </td>
                        <td *ngIf="(onStep === 1 && innerStep === 1) || onStep === 2">

                            {{item.punchinClaimId}}
                        </td>
                        <td>{{item.claimDate |
                            date: 'dd/MM/yyyy'
                            }}</td>
                        <td>{{item.borrowerName}}</td>
                        <td>{{item.nomineeName}}</td>
                        <td>{{item.borrowerContactNumber}}</td>
                        <td>{{item.borrowerAddress}}</td>
                        <td>
                            <span *ngIf="item.singnedClaimDocument === 'UPLOADED'"> <img
                                    src="assets/icons/bluetick.svg"></span>
                            <span *ngIf="item.singnedClaimDocument === 'NOT_UPLOADED'"> <img
                                    src="assets/icons/cross.svg"></span>
                            <span *ngIf="item.singnedClaimDocument === 'APPROVED'"><img
                                    src="assets/icons/tick-green.svg"></span>
                            <span *ngIf="item.singnedClaimDocument === 'REJECTED'"><img
                                    src="assets/icons/cross-red.svg">
                            </span>
                        </td>
                        <td>
                            <span *ngIf="item.deathCertificate === 'UPLOADED'"> <img
                                    src="assets/icons/bluetick.svg"></span>
                            <span *ngIf="item.deathCertificate === 'NOT_UPLOADED'"> <img
                                    src="assets/icons/cross.svg"></span>
                            <span *ngIf="item.deathCertificate === 'APPROVED'"><img
                                    src="assets/icons/tick-green.svg"></span>
                            <span *ngIf="item.deathCertificate === 'REJECTED'">
                                <img src="assets/icons/cross-red.svg">
                            </span>
                        </td>
                        <td>
                            <span *ngIf="item.borrowerKycProof === 'UPLOADED'"> <img
                                    src="assets/icons/bluetick.svg"></span>
                            <span *ngIf="item.borrowerKycProof === 'NOT_UPLOADED'"> <img
                                    src="assets/icons/cross.svg"></span>
                            <span *ngIf="item.borrowerKycProof === 'APPROVED'"><img
                                    src="assets/icons/tick-green.svg"></span>
                            <span *ngIf="item.borrowerKycProof === 'REJECTED'"><img src="assets/icons/cross-red.svg">
                            </span>
                        </td>
                        <td>
                            <span *ngIf="item.nomineeKycProof === 'UPLOADED'"> <img
                                    src="assets/icons/bluetick.svg"></span>
                            <span *ngIf="item.nomineeKycProof === 'NOT_UPLOADED'"> <img
                                    src="assets/icons/cross.svg"></span>
                            <span *ngIf="item.nomineeKycProof === 'APPROVED'"><img
                                    src="assets/icons/tick-green.svg"></span>
                            <span *ngIf="item.nomineeKycProof === 'REJECTED'"><img src="assets/icons/cross-red.svg">
                            </span>
                        </td>
                        <td>
                            <span *ngIf="item.bankAccountProof === 'UPLOADED'"> <img
                                    src="assets/icons/bluetick.svg"></span>
                            <span *ngIf="item.bankAccountProof === 'NOT_UPLOADED'"> <img
                                    src="assets/icons/cross.svg"></span>
                            <span *ngIf="item.bankAccountProof === 'APPROVED'"><img
                                    src="assets/icons/tick-green.svg"></span>
                            <span *ngIf="item.bankAccountProof === 'REJECTED'"><img src="assets/icons/cross-red.svg">
                            </span>
                        </td>
                        <td>
                            <span *ngIf="item.additionalDoc === 'UPLOADED'"> <img
                                    src="assets/icons/bluetick.svg"></span>
                            <span *ngIf="item.additionalDoc === 'NOT_UPLOADED'"> <img
                                    src="assets/icons/cross.svg"></span>
                            <span *ngIf="item.additionalDoc ==='APPROVED'"><img
                                    src="assets/icons/tick-green.svg"></span>
                            <span *ngIf="item.additionalDoc === 'REJECTED'"><img src="assets/icons/cross-red.svg">
                            </span>
                        </td>
                        <td class=" status-button">
                            {{item.claimStatus | removeunderscore | titlecase}}</td>
                        <td class="text-center" *ngIf="onStep === 0">

                            <span class="allocate-button" *ngIf="item.agentAllocated == true"
                                (click)="openAllocatedModal(verifierAllocatedTemplate, item.id)">Allocated
                            </span>
                            <span class="allocate-button" *ngIf="item.agentAllocated == false"
                                (click)="openAllocatedModal(verifierAllocatedTemplate, item.id)">Allocate
                            </span>
                            <span
                                (click)="openTrackingModal(trackingTemplate,item.id,item.punchinClaimId, item.agentName)"
                                title="Tracking">
                                <i class="fa fa-map-o"></i>
                            </span>
                            <span
                                (click)="openRemarkModal(remarkTemplate,item.id,item.punchinClaimId, item.bankerVerifierRemarkRead, item.agentVerifierRemarkRead)"
                                title="Remark"
                                *ngIf="(item.bankerVerifierRemarkRead == null || item.bankerVerifierRemarkRead == true) && (item.agentVerifierRemarkRead == null || item.agentVerifierRemarkRead == true)">
                                <i class="fa fa-comment" aria-hidden="true"></i>

                            </span>
                            <span
                                (click)="openRemarkModal(remarkTemplate,item.id,item.punchinClaimId, item.bankerVerifierRemarkRead, item.agentVerifierRemarkRead)"
                                title="Remark"
                                *ngIf="item.bankerVerifierRemarkRead == false || item.agentVerifierRemarkRead == false">
                                <i class="fa fa-comment" id="commentColor" aria-hidden="true"></i>

                            </span>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="pagination-box d-flex justify-content-end align-items-center"
            *ngIf="verifiercordListData.length > 0">
            <div class="pagination-content">
                <pagination [totalItems]="totalrecords" previousText="&lsaquo;" nextText="&rsaquo;"
                    (pageChanged)="changeVerifierPage($event)" [itemsPerPage]="pageSize" firstText="&laquo;"
                    lastText="&raquo;" [maxSize]="5" [(ngModel)]="currentPage"></pagination>
            </div>
        </div>
    </div>
</ng-container>

<ng-template #remarkTemplate>
    <div class="modal-header">
        <h6 class="modal-title"> Remark</h6>

        <button type="button" class="btn-close close pull-right" aria-label="Close" (click)="closeRemark()">
            <span aria-hidden="true" class="visually-hidden">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="container-fluid remark-container">
            <div class="row">
                <div class="new-requirements">
                    <p> Punchin Ref.ID : <span>{{this.p_id}}</span></p>
                </div>
                <div class="remark d-flex justify-content-center align-items-center"
                    *ngIf="role =='ADMIN' || role =='VERIFIER'">
                    <button type="button" class="btn btn-light m-2" [ngClass]="{active: remarkStep === 0}"
                        [routerLinkActive]="['active']" (click)="remarkStep =0;getRemark('AGENT')">Agent
                        Remark
                        <span style="color: #7fd06e;" *ngIf="this.agent_Verifier_Remark_Read == false"><i
                                class="fa fa-check"></i></span>
                    </button>
                    <button type="button" class="btn btn-light m-2" [ngClass]="{active: remarkStep === 1}"
                        [routerLinkActive]="['active']" (click)="remarkStep =1;getRemark('BANKER')">Banker
                        Remark
                        <span style="color: #7fd06e;" *ngIf="this.banker_Verifier_Remark_Read == false"><i
                                class="fa fa-check"></i></span>
                    </button>
                </div>
                <div class="remark-wrapper">
                    <div class="content" *ngFor="let item of remarkDetails">
                        <p>{{item.createdAt | date}} | {{item.createdAt | date:'hh:mm a'}} <span>({{item.role |
                                titlecase}})</span>
                            <br><span>{{item.remark | titlecase}}</span>
                        </p>
                        <p class="img-icon">
                            <img src="../../../../assets/icons/right-tick-blue.svg">
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <form [formGroup]="remarkform">
            <div class="row">
                <label> <b>Enter Remark</b></label>
                <div class="col-8">
                    <input type="text" class="form-control" placeholder="Enter Remark" formControlName="remark"
                        (keydown)="spaceRemoveFirst($event)">
                </div>
                <div class="col-4">
                    <button class="btn btn-primary" [disabled]="!remarkform.valid"
                        (click)="remarkAdd();remarkStep =0">Add
                        Remark</button>
                </div>
            </div>
        </form>
    </div>
</ng-template>

<ng-template #trackingTemplate>
    <div class="modal-header">
        <h6 class="modal-title"> Claim Tracking</h6>

        <button type="button" class="btn-close close pull-right" aria-label="Close" (click)="this.bsModalRef4?.hide()">
            <span aria-hidden="true" class="visually-hidden">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="container-fluid tracking-container">
            <div class="row">
                <div class="col-12 ">
                    <div class="new-requirements">
                        <p>
                            Punchin Ref.ID : <span>{{this.p_id}}</span>
                        </p>
                        <p>
                            <strong>Agent Allocated :</strong> {{AllocatedAgentName || 'no agent allocated'}}
                        </p>
                    </div>
                    <div class="inner-Wrapper">
                        <p>
                            Days so far <br><span>{{diffDays}} Days</span>
                        </p>
                        <p>
                            Status <br>
                            <span>{{cliam_Status?.claimStatus | removeunderscore | titlecase}}</span>
                        </p>
                    </div>
                    <div class="down-Wrapper">
                        <div class="content" *ngFor="let item of cliamHistoryData">
                            <p>{{item.createdAt | date}} | {{item.createdAt | date:'hh:mm a'}}
                                <br><span>{{item.description}}</span>
                            </p>
                            <p class="img-icon">
                                <img src="../../../../assets/icons/right-tick-blue.svg">
                            </p>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</ng-template>


<ng-template #verifierAllocatedTemplate>
    <div class="modal-header">
        <h6>Agent - Allocated</h6>
        <button type="button" class="btn-close close pull-right" aria-label="Close" (click)="this.bsModalRef3?.hide()">
            <span aria-hidden="true" class="visually-hidden">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="agent-allocated d-flex justify-content-center align-items-center">
            <form [formGroup]="agnetAllocatedForm">
                <div class="row">
                    <div class="col-8">
                        <select class="form-select form-select-md" aria-label=".form-select-sm example"
                            formControlName="agent_name" (input)="selectAgentAllocatedName($event)">
                            <option selected value="null">Select Agent</option>
                            <option [value]="item.id" *ngFor="let item of agentAllocatedData">{{item.firstName}}
                            </option>
                        </select>
                    </div>

                    <div class="col-4">
                        <button class="btn btn-primary" [disabled]="!agnetAllocatedForm.valid"
                            (click)="sumbitAgentAllocation()">Submit</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

</ng-template>


<ng-template #fileTemplate>
    <div class="modal-header">
        <button type="button" class="btn-close close pull-right" aria-label="Close" (click)="closeModal()">
            <span aria-hidden="true" class="visually-hidden">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <app-file-upload (AwsFileList)="onGetUploadedFile($event)"></app-file-upload>
    </div>
</ng-template>

<ng-template #content let-modal>
    <div class="modal-header">
        <p class="modal-title">Claims Report</p>
    </div>
    <div class="modal-body">
        <p>Please Check Rejected Claims Report</p>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-light" (click)="modal.close('Close click')">Close</button>
    </div>
</ng-template>
<button class="btn btn-outline-primary dialogbuttom" (click)="openDialogModal(content)">Small modal</button>